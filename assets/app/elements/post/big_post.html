<div class="big_post_directive clearfix" colored-tag-node="vm.node" ng-switch="vm.editMode">
    <div ng-switch-when="true" static-edit-post on-finish="vm.onSave(response)" node="vm.editNode"></div>
    <div ng-switch-default>
        <button class="fa fa-pencil pull-right btn btn-sm btn-default" ng-click="vm.editMode = true" data-title="edit" bs-tooltip></button>
        <h2 ng-bind="vm.node.title" class="post_title"></h2>
        <div class="additional_info">
            <span show-timestamp node="vm.node"></span>
            <span class="pull-right">{{vm.node.viewCount}} views</span>
        </div>

        <div big-taglist node="vm.node" class="taglist"></div>
        <span toggle-zen node="vm.node" class="pull-right" ng-show="vm.node.description"></span>
        <div class="post_description" markdown="vm.node.description" ng-show="vm.node.description"></div>
        <button class="replytool pull-right btn btn-sm btn-default" ng-click='vm.replyTo()' data-title="respond" bs-tooltip><i class="fa fa-plus"></i></button>
    </div>
    <a ng-if="vm.tagChanges.length > 0 || vm.editChanges.length > 0" href="#" ng-click="vm.showChanges = !vm.showChanges" class="showchanges">
        <i class="fa" ng-class="{'fa-chevron-down': vm.showChanges, 'fa-chevron-right': !vm.showChanges}"></i>
        Show change requests
    </a>
    <div ng-show="vm.showChanges">
        <div post-tag-changes="vm.tagChanges" on-apply="vm.onTagApply(tag, isRemove)"></div>
            <div post-edit-changes="vm.editChanges" on-apply="vm.onApply(node)"></div>
    </div>
</div>
