<div class="big_post_directive clearfix" colored-tag-node="vm.node" big="true" ng-switch="vm.editMode">
    <div ng-switch-when="true" static-edit-post on-cancel="vm.onCancel()" on-delete="vm.onDelete(response)" on-save="vm.onSave(response)" node="vm.node"></div>
    <div ng-switch-default>
        <button ng-if="::vm.Auth.isLoggedIn" class="fa fa-pencil pull-right btn btn-sm btn-default" ng-click="vm.editMode = true" data-title="Edit" bs-tooltip></button>
        <h2 ng-bind="vm.node.title" class="post_title"></h2>
        <div class="additional_info">
            <span show-timestamp="vm.node.timestamp"></span>
            <span class="pull-right">
                <div>{{vm.node.viewCount}} views</div>
                <div ng-if="::vm.showAuthor">
                <i class="fa fa-user"></i>
                <a ui-sref="users.details({id: vm.node.author.id})" ng-bind="vm.node.author.name"></a
                </div>
            </span>
        </div>

        <div big-taglist node="vm.node" class="taglist"></div>
        <span toggle-zen node="vm.node" class="pull-right" ng-show="vm.node.description"></span>
        <div class="post_description" markdown="vm.node.description" ng-show="vm.node.description"></div>
        <button ng-if="::vm.Auth.isLoggedIn" class="replytool pull-right btn btn-sm btn-default" ng-click='vm.replyTo()' data-title="Respond" bs-tooltip><i class="fa fa-plus"></i></button>
    </div>
    <a ng-if="vm.changeRequests.length > 0" href="#" ng-click="vm.showChanges = !vm.showChanges" class="showchanges">
        <i class="fa" ng-class="{'fa-chevron-down': vm.showChanges, 'fa-chevron-right': !vm.showChanges}"></i>
        Show open change requests
    </a>
    <div ng-show="vm.showChanges">
        <post-change-request changes="vm.changeRequests" on-delete-apply="vm.onDeleteApply()" on-tag-apply="vm.onTagApply(change)" on-apply="vm.onApply(node)"></post-change-request>
    </div>
</div>
