<form ng-submit='vm.onSubmit({items: vm.lastSearchResult})'>
    <div class="input-group">
        <input type="text" class="form-control" ng-model='vm.ngModel.title'
        typeahead="node for node in vm.getNodes($viewValue)" typeahead-on-select="vm.onSelect({item: $item})"
        typeahead-input-formatter="vm.formatLabel()" typeahead-template-url="discourse_node_search_item.html"
        required>
        <span class="input-group-btn">
            <button class="btn btn-default" type="submit">
                <i ng-class='vm.iconClass'></i>
            </button>
        </span>
    </div>
</form>

<script type="text/ng-template" id="discourse_node_search_item.html">
    <a href="#" class="node" ng-bind="match.model.title"></a>
</script>
